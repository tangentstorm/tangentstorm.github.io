<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>mr1 : reification</title>
<!-- 2013-05-11 Sat 00:40 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="generator" content="Org-mode"/>
<meta name="author" content="michal"/>
<link rel="stylesheet" type="text/css" href="etc/style.css">
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">mr1 : reification</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Introduction</a></li>
<li><a href="#sec-2">2. Last time we hard-coded the data, now let's read from a file.</a></li>
<li><a href="#sec-3">3. step : manually assign the fields in order</a></li>
<li><a href="#sec-4">4. step : use an array of variants for printing</a></li>
<li><a href="#sec-5">5. step : replace the record with an array of variants</a></li>
<li><a href="#sec-6">6. step : reify the type system</a>
<ul>
<li><a href="#sec-6-1">6.1. Records are fixed width. replace with arrays of bytes.</a></li>
<li><a href="#sec-6-2">6.2. Track the width of the column in bytes.</a></li>
<li><a href="#sec-6-3">6.3. The schema is described with arrays of type variables.</a></li>
<li><a href="#sec-6-4">6.4. Define a Database meta-model.</a></li>
</ul>
</li>
<li><a href="#sec-7">7. step : replace hand-sequenced parser &rarr; array of scanners</a>
<ul>
<li><a href="#sec-7-1">7.1. Use the first row to learn the width of the table.</a></li>
<li><a href="#sec-7-2">7.2. While not Eof, use <code>SetLength</code> to generate each new array.</a></li>
<li><a href="#sec-7-3">7.3. Create an Array of parsers.</a></li>
</ul>
</li>
<li><a href="#sec-8">8. Use TClass / RTTI published fields for tool integration.</a></li>
<li><a href="#sec-9">9. Make the separator character configurable.</a></li>
<li><a href="#sec-10">10. Load tables of variants without a particular schema.</a></li>
<li><a href="#sec-11">11. Results</a></li>
<li><a href="#sec-12">12. Summary</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
In the last episode.
</p>

<div class="org-src-container">

<pre class="src src-pascal"></pre>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Last time we hard-coded the data, now let's read from a file.</h2>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> <span class="todo TODO">TODO</span> step : manually assign the fields in order</h2>
<div class="outline-text-2" id="text-3">
<p>
id   = nextInteger
col2 = nextString
col3 = nextInteger
</p>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> <span class="todo TODO">TODO</span> step : use an array of variants for printing</h2>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> <span class="todo TODO">TODO</span> step : replace the record with an array of variants</h2>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> <span class="todo TODO">TODO</span> step : reify the type system</h2>
<div class="outline-text-2" id="text-6">
<p>
Replace the array of variants an array of bytes.
Field name, type name
</p>
</div>
<div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> <span class="todo TODO">TODO</span> Records are fixed width. replace with arrays of bytes.</h3>
</div>
<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> <span class="todo TODO">TODO</span> Track the width of the column in bytes.</h3>
</div>
<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> <span class="todo TODO">TODO</span> The schema is described with arrays of type variables.</h3>
<div class="outline-text-3" id="text-6-3">
<p>
You could either load the schema directly from the table's file, or you could have some number of schema tables.
</p>
</div>
</div>

<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4"><span class="section-number-3">6.4</span> <span class="todo TODO">TODO</span> Define a Database meta-model.</h3>
<div class="outline-text-3" id="text-6-4">
<ul class="org-ul">
<li>tables
</li>
<li>column names
</li>
<li>types
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> <span class="todo TODO">TODO</span> step : replace hand-sequenced parser &rarr; array of scanners</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> <span class="todo TODO">TODO</span> Use the first row to learn the width of the table.</h3>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> <span class="todo TODO">TODO</span> While not Eof, use <code>SetLength</code> to generate each new array.</h3>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3"><span class="section-number-3">7.3</span> <span class="todo TODO">TODO</span> Create an Array of parsers.</h3>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> <span class="todo TODO">TODO</span> Use TClass / RTTI published fields for tool integration.</h2>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> <span class="todo TODO">TODO</span> Make the separator character configurable.</h2>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> <span class="todo TODO">TODO</span> Load tables of variants without a particular schema.</h2>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> Results</h2>
<div class="outline-text-2" id="text-11">
<p>
To compile and run the program, use the following commands:
</p>

<pre class="example">
fpc mr1.pas
./urldb1
</pre>

<p>
You should see the following output:
</p>

<pre class="example">
</pre>
</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> Summary</h2>
</div>
</div>
</body>
</html>
