<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>implish devlog</title>
<!-- 2013-09-05 Thu 19:54 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="michal wallace" />
<link rel="stylesheet" type="text/css" href="/etc/style.css">
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">implish devlog</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. hello world</a></li>
<li><a href="#sec-2">2. Walking the tree.</a>
<ul>
<li><a href="#sec-2-1">2.1. walking the tree is what lisp does on its own :)</a></li>
</ul>
</li>
<li><a href="#sec-3">3. zip in picolisp</a>
<ul>
<li><a href="#sec-3-1">3.1. NOTE . actually that was more like zipwith</a></li>
</ul>
</li>
<li><a href="#sec-4">4. repeat loops</a>
<ul>
<li><a href="#sec-4-1">4.1. NOTE . wasn't a good idea to use "-" here!</a></li>
</ul>
</li>
<li><a href="#sec-5">5. some stuff i wrote earlier:</a></li>
<li><a href="#sec-6">6. <code>[0/8]</code> Goals for building this system.</a>
<ul>
<li><a href="#sec-6-1">6.1. Make a small imperative meta-language</a></li>
<li><a href="#sec-6-2">6.2. Port my grammar combinators (pre) to picolisp/implish</a></li>
<li><a href="#sec-6-3">6.3. Port the PL0-&gt;Retro thing I did to implish/pre.</a></li>
<li><a href="#sec-6-4">6.4. Write a full parser for pascal.</a></li>
<li><a href="#sec-6-5">6.5. Generate free pascal code from the AST</a></li>
<li><a href="#sec-6-6">6.6. Generate retro/ngaro code from the AST</a></li>
<li><a href="#sec-6-7">6.7. Be able to transpile turbo pascal to run on retrovm.</a></li>
<li><a href="#sec-6-8">6.8. learn how to use pilog (for type checking, etc)</a></li>
<li><a href="#sec-6-9">6.9. and maybe coderef, too, at last?</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><a id="nyn9md0178g0" name="nyn9md0178g0"></a><span class="section-number-2">1</span> hello world</h2>
<div class="outline-text-2" id="text-1">

<p>
Suppose we have the following program:
</p>

<div class="org-src-container">

<pre class="src src-picolisp">'((program hello)
  (<span style="color: #00ffff;">begin</span>
    (writeln <span style="color: #00ff00;">"hello world"</span>)))
</pre>
</div>

<p>
This corresponds to the pascal code:
</p>

<div class="org-src-container">

<pre class="src src-pascal"><span style="color: #00ffff;">program</span> <span style="color: #ffffff; font-weight: bold;">hello</span>;
<span style="color: #00ffff;">begin</span>
  writeln(<span style="color: #00ff00;">'hello world'</span>)
<span style="color: #00ffff;">end</span>.
</pre>
</div>

<p>
Or in retro:
</p>

<div class="org-src-container">

<pre class="src src-retro"><span style="color: #c63; font-weight: bold;">:</span> hello <span style="color: #00ff00;">"hello world"</span> puts cr <span style="color: #c63; font-weight: bold;">;</span>
</pre>
</div>

<p>
How can we translate it?
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><a id="4cxbd77178g0" name="4cxbd77178g0"></a><span class="section-number-2">2</span> Walking the tree.</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><a id="qn3i2cb178g0" name="qn3i2cb178g0"></a><span class="section-number-3">2.1</span> walking the tree is what lisp does on its own :)</h3>
<div class="outline-text-3" id="text-2-1">

<p>
It's kind of interesting&#x2026; all the normal dispatch stuff you have to do even in a high level language like python or haskell just goes away.
</p>

<p>
I was writing this whole big case statement like:
</p>

<div class="org-src-container">

<pre class="src src-picolisp">(<span style="color: #ff00ff; font-weight: bold;">case</span> symbol
   ('repeat ...)
   ('while ...)
   ('if ...) ... )
</pre>
</div>

<p>
&#x2026; but then i realized i could just make them all functions.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><a id="b7r4kfb178g0" name="b7r4kfb178g0"></a><span class="section-number-2">3</span> <span class="done DONE">DONE</span> zip in picolisp</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">

<pre class="src src-picolisp">(<span style="color: #00ffff;">de</span> <span style="color: #ffffff; font-weight: bold;">zip</span> (F A B)
   (<span style="color: #ff00ff; font-weight: bold;">if</span> (<span style="color: #ff00ff; font-weight: bold;">and</span> A B)
      (<span style="color: #00ffff;">cons</span> (F (<span style="color: #00ffff;">car</span> A) (<span style="color: #00ffff;">car</span> B))
         (zip F (<span style="color: #00ffff;">cdr</span> A) (<span style="color: #00ffff;">cdr</span> B)) ) ) )
</pre>
</div>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><a id="ky7cvi3098g0" name="ky7cvi3098g0"></a><span class="section-number-3">3.1</span> NOTE . actually that was more like zipwith</h3>
<div class="outline-text-3" id="text-3-1">

<p>
The goal of the zip routine was to help me make the function that I eventually called <code>qd</code>&#x2026; Basically a way to define special forms that didn't evaluate their arguments.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><a id="v6w1zhb178g0" name="v6w1zhb178g0"></a><span class="section-number-2">4</span> <span class="done DONE">DONE</span> repeat loops</h2>
<div class="outline-text-2" id="text-4">

<div class="org-src-container">

<pre class="src src-picolisp" id="interpret">(<span style="color: #00ffff;">de</span> <span style="color: #ffffff; font-weight: bold;">repeat</span> -
   (<span style="color: #00ffff;">let</span> (Block (<span style="color: #00ffff;">car</span> -)
         Cond  (<span style="color: #00ffff;">cdr</span> -) )
      (<span style="color: #00ffff;">eval</span> Block)
      (<span style="color: #ff00ff; font-weight: bold;">while</span> (<span style="color: #ff00ff; font-weight: bold;">not</span> (<span style="color: #00ffff;">eval</span> Cond))
         (<span style="color: #00ffff;">eval</span> Block) ) ) )
</pre>
</div>
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><a id="hr4bdn3098g0" name="hr4bdn3098g0"></a><span class="section-number-3">4.1</span> NOTE . wasn't a good idea to use "-" here!</h3>
<div class="outline-text-3" id="text-4-1">
<p>
I caught the error before it caused a problem, but with picolisp's dynamic interpreter, pretty sure this would have replaced the "-" function&#x2026; Whoops!
</p>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><a id="ta01zf1088g0" name="ta01zf1088g0"></a><span class="section-number-2">5</span> <span class="done DONE">DONE</span> some stuff i wrote earlier:</h2>
<div class="outline-text-2" id="text-5">

<p>
This file seems to be turning into more of a blog than a program&#x2026; maybe that's how i should write things?
</p>

<div class="org-src-container">

<pre class="src src-picolisp">(<span style="color: #00ffff;">de</span> <span style="color: #ffffff; font-weight: bold;">writeln</span> @
   (<span style="color: #00ffff;">pass</span> println) )

(<span style="color: #00ffff;">de</span> <span style="color: #ffffff; font-weight: bold;">program</span> (Name)
   (writeln) )

(<span style="color: #00ffff;">de</span> <span style="color: #ffffff; font-weight: bold;">begin</span> @ (<span style="color: #00ffff;">rest</span>)) <span style="color: #66f;"># </span><span style="color: #66f;">just pass through</span>
</pre>
</div>

<p>
&lt;top level&gt; -&gt; ":" (contents) ";"
(program hello) -&gt; "hello"
(begin &#x2026;) -&gt;
writeln -&gt;
</p>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><a id="q0fjyv4098g0" name="q0fjyv4098g0"></a><span class="section-number-2">6</span> <code>[0/8]</code> Goals for building this system.</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> <span class="todo TODO">TODO</span> Make a small imperative meta-language</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li>Quoting, quasiquoting, and unquoting should be easy.
</li>
<li>Two 'ambient' global stacks, as in forth.
</li>
<li>Queues for message passing, pretty much everywhere.
</li>
<li>Main data stack should be nested, though.
</li>
<li>Allow and encourage left to right, mixfix notation.
<ul class="org-ul">
<li>possibly  prefix: infix :suffix ?
</li>
</ul>
</li>
<li>Keep the language <i>simple</i> and small.
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> <span class="todo TODO">TODO</span> Port my grammar combinators (pre) to picolisp/implish</h3>
<div class="outline-text-3" id="text-6-2">
<p>
This way I can begin creating a parser for retro pascal (and other things).
</p>
</div>
</div>
<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> <span class="todo TODO">TODO</span> Port the PL0-&gt;Retro thing I did to implish/pre.</h3>
</div>
<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4"><span class="section-number-3">6.4</span> <span class="todo TODO">TODO</span> Write a full parser for pascal.</h3>
<div class="outline-text-3" id="text-6-4">
<p>
Probably I can base this on the grammar I have for oberon already.
</p>
</div>
</div>
<div id="outline-container-sec-6-5" class="outline-3">
<h3 id="sec-6-5"><span class="section-number-3">6.5</span> <span class="todo TODO">TODO</span> Generate free pascal code from the AST</h3>
<div class="outline-text-3" id="text-6-5">
<p>
This way I can use implish as a meta-programming environment.
</p>
</div>
</div>
<div id="outline-container-sec-6-6" class="outline-3">
<h3 id="sec-6-6"><span class="section-number-3">6.6</span> <span class="todo TODO">TODO</span> Generate retro/ngaro code from the AST</h3>
<div class="outline-text-3" id="text-6-6">
<p>
This way I can use implish in the browser.
</p>
</div>
</div>

<div id="outline-container-sec-6-7" class="outline-3">
<h3 id="sec-6-7"><span class="section-number-3">6.7</span> <span class="todo TODO">TODO</span> Be able to transpile turbo pascal to run on retrovm.</h3>
</div>

<div id="outline-container-sec-6-8" class="outline-3">
<h3 id="sec-6-8"><span class="section-number-3">6.8</span> <span class="todo TODO">TODO</span> learn how to use pilog (for type checking, etc)</h3>
</div>

<div id="outline-container-sec-6-9" class="outline-3">
<h3 id="sec-6-9"><a id="rgc6cx5098g0" name="rgc6cx5098g0"></a><span class="section-number-3">6.9</span> <span class="todo TODO">TODO</span> and maybe coderef, too, at last?</h3>
<div class="outline-text-3" id="text-6-9">
<p>
Since I'm parsing and I want to dig into pilog and the database stuff, I think this would be a good time to start building a database of my old code. And while I'm making a database of my own code, I might as well make databases for retro and picolisp too.
</p>
</div>
</div>
</div>
</div>
</body>
</html>
